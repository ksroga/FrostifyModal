"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw l}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var FrostifyModals=function(){function O(){_classCallCheck(this,O),this.preparedSettings=[],this.lastModalId=0}return _createClass(O,[{key:"show",value:function(){return document.body.appendChild(O.prepareModal(this.preparedSettings[this.lastModalId])),this}},{key:"close",value:function(){var e=(e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.preparedSettings[this.lastModalId].id,t=!0;return(t=(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==this.preparedSettings[e]&&this.preparedSettings[e].onCancel&&!1===this.preparedSettings[e].onCancel()?!1:t)&&O.closeModal(e),this}},{key:"submit",value:function(){var e=(e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.preparedSettings[this.lastModalId].id,t=!0;return(t=void 0!==this.preparedSettings[e]&&this.preparedSettings[e].onOk&&!1===this.preparedSettings[e].onOk()?!1:t)&&O.closeModal(e),this}},{key:"set",value:function(e){return this.lastModalId++,this.preparedSettings[this.lastModalId]=this.prepareModalSettings(e),this}},{key:"prepareModalSettings",value:function(e){var t;return{id:this.lastModalId,title:null!==(t=e.title)&&void 0!==t?t:"",content:null!==(t=e.content)&&void 0!==t?t:"",onOk:null!==(t=e.onOk)&&void 0!==t?t:"",onCancel:null!==(t=e.onCancel)&&void 0!==t?t:null,isClosable:!1!==e.isClosable,isDraggable:!1!==e.isDraggable,reverseButtons:!0===e.reverseButtons,labels:{ok:null!==(t=null===(t=e.labels)||void 0===t?void 0:t.ok)&&void 0!==t?t:"Okay",cancel:null!==(t=null===(t=e.labels)||void 0===t?void 0:t.cancel)&&void 0!==t?t:"Cancel"},containerStyles:null!==(t=e.containerStyles)&&void 0!==t?t:{},headerStyles:null!==(t=e.headerStyles)&&void 0!==t?t:{},bodyStyles:null!==(t=e.bodyStyles)&&void 0!==t?t:{},footerStyles:null!==(t=e.footerStyles)&&void 0!==t?t:{},buttonsStyles:null!==(e=e.buttonsStyles)&&void 0!==e?e:{}}}}],[{key:"closeModal",value:function(e){var t=document.querySelector('.fmodal-wrapper[data-id="'.concat(e,'"]'));t.style.animation="fadeOut 0.25s ease 0s 1 normal forwards",t.style.opacity="0",setTimeout(function(){return t.remove()},250)}},{key:"prepareModal",value:function(t){var e=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),i=document.createElement("button"),s=document.createElement("button");a.classList.add("fmodal-close"),a.onclick=function(){return FrostModal.close(t.id,!1)},a.innerText="X",r.classList.add("fmodal-header"),r.classList.toggle("fmodal-draggable",t.isDraggable),r.innerHTML=t.title,r.ondragover=function(e){return O.dragOver(e)},!0===t.isClosable&&r.appendChild(a);for(var d=0,c=Object.entries(t.headerStyles);d<c.length;d++){var u=_slicedToArray(c[d],2),y=u[0],u=u[1];r.style[y]=u}l.classList.add("fmodal-body"),l.innerHTML=t.content;for(var f=0,p=Object.entries(t.bodyStyles);f<p.length;f++){var v=_slicedToArray(p[f],2),m=v[0],v=v[1];l.style[m]=v}i.classList.add("fmodal-button","fmodal-cancel"),i.onclick=function(){return FrostModal.close(t.id)},i.innerHTML=t.labels.cancel,s.classList.add("fmodal-button","fmodal-accept"),s.onclick=function(){return FrostModal.submit(t.id)},s.innerHTML=t.labels.ok;for(var h=0,b=Object.entries(t.buttonsStyles);h<b.length;h++){var g=_slicedToArray(b[h],2),S=g[0],g=g[1];i.style[S]=g,s.style[S]=g}t.reverseButtons&&(i.style.float="right",s.style.float="none"),o.classList.add("fmodal-footer"),o.appendChild(i),o.appendChild(s);for(var k=0,M=Object.entries(t.footerStyles);k<M.length;k++){var C=_slicedToArray(M[k],2),_=C[0],C=C[1];o.style[_]=C}n.classList.add("fmodal-container"),n.appendChild(r),n.appendChild(l),n.appendChild(o);for(var T=0,w=Object.entries(t.containerStyles);T<w.length;T++){var A=_slicedToArray(w[T],2),L=A[0],A=A[1];o.style[L]=A}return t.isDraggable&&O.makeDraggable(n),e.classList.add("fmodal-wrapper"),e.dataset.id=t.id,e.appendChild(n),!0===t.isClosable&&(e.onclick=function(){return O.closeModal(t.id)},document.onkeydown=function(e){"Escape"===e.key&&O.closeModal(t.id)}),e}},{key:"makeDraggable",value:function(t){var n=0,r=0,l=0,o=0;function e(e){(e=e||window.event).preventDefault(),l=e.clientX,o=e.clientY,document.onmouseup=i,document.onmousemove=a}function a(e){(e=e||window.event).preventDefault(),n=l-e.clientX,r=o-e.clientY,l=e.clientX,o=e.clientY,t.style.top=t.offsetTop-r+"px",t.style.left=t.offsetLeft-n+"px",t.style.position="absolute",t.parentElement.style.display="block"}function i(){document.onmouseup=null,document.onmousemove=null}t.querySelector(".fmodal-header")?t.querySelector(".fmodal-header").onmousedown=e:t.onmousedown=e}}]),O}(),FrostModal=new FrostifyModals;