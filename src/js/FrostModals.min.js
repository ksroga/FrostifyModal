"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var FrostModals=function(){function s(){_classCallCheck(this,s),this.preparedSettings=[],this.lastModalId=0}return _createClass(s,[{key:"show",value:function(){return document.body.appendChild(s.prepareModal(this.preparedSettings[this.lastModalId])),this}},{key:"close",value:function(){var e,t=(t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.preparedSettings[this.lastModalId].id,n=!0;return(n=(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==this.preparedSettings[t]&&this.preparedSettings[t].onCancel&&!1===this.preparedSettings[t].onCancel()?!1:n)&&((e=document.querySelector('.fmodal-wrapper[data-id="'.concat(t,'"]'))).style.animation="fadeOut 0.25s ease 0s 1 normal forwards",e.style.opacity="0",setTimeout(function(){return e.remove()},250)),this}},{key:"submit",value:function(){var e=(e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.preparedSettings[this.lastModalId].id,t=!0;return(t=void 0!==this.preparedSettings[e]&&this.preparedSettings[e].onOk&&!1===this.preparedSettings[e].onOk()?!1:t)&&document.querySelector('.fmodal-wrapper[data-id="'.concat(e,'"]')).remove(),this}},{key:"set",value:function(e){return this.lastModalId++,this.preparedSettings[this.lastModalId]=this.prepareModalSettings(e),this}},{key:"prepareModalSettings",value:function(e){return{id:this.lastModalId,title:e.title||"",content:e.content||"",onOk:e.onOk||"",onCancel:e.onCancel||null,closeButton:!1!==e.closeButton,isDraggable:!1!==e.isDraggable,header:{background:e.header?e.header.background:null,color:e.header?e.header.color:null}}}}],[{key:"prepareModal",value:function(e){var t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),r=document.createElement("div"),d=document.createElement("button"),i=document.createElement("button");return r.classList.add("fmodal-close"),r.onclick=function(){return FrostModal.close(e.id,!1)},r.innerText="X",a.classList.add("fmodal-header"),a.classList.toggle("fmodal-draggable",e.isDraggable),a.innerHTML=e.title,a.style.background=e.header.background||a.style.background,a.style.color=e.header.color||a.style.color,a.ondragover=function(e){return s.dragOver(e)},!0===e.closeButton&&a.appendChild(r),o.classList.add("fmodal-body"),o.innerHTML=e.content,d.classList.add("fmodal-button","fmodal-cancel"),d.onclick=function(){return FrostModal.close(e.id)},d.innerHTML="Cancel",i.classList.add("fmodal-button","fmodal-accept"),i.onclick=function(){return FrostModal.submit(e.id)},i.innerHTML="Okay",l.classList.add("fmodal-footer"),l.appendChild(d),l.appendChild(i),n.classList.add("fmodal-container"),n.appendChild(a),n.appendChild(o),n.appendChild(l),e.isDraggable&&s.makeDraggable(n),t.classList.add("fmodal-wrapper"),t.dataset.id=e.id,t.appendChild(n),t}},{key:"makeDraggable",value:function(t){var n=0,a=0,o=0,l=0;function e(e){(e=e||window.event).preventDefault(),o=e.clientX,l=e.clientY,document.onmouseup=d,document.onmousemove=r}function r(e){(e=e||window.event).preventDefault(),n=o-e.clientX,a=l-e.clientY,o=e.clientX,l=e.clientY,t.style.top=t.offsetTop-a+"px",t.style.left=t.offsetLeft-n+"px",t.style.position="absolute",t.parentElement.style.display="block"}function d(){document.onmouseup=null,document.onmousemove=null}t.querySelector(".fmodal-header")?t.querySelector(".fmodal-header").onmousedown=e:t.onmousedown=e}}]),s}(),FrostModal=new FrostModals;