"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classPrivateMethodGet(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var _prepareModalSettings=new WeakSet,FrostModals=function(){function s(){_classCallCheck(this,s),_prepareModalSettings.add(this),_defineProperty(this,"preparedSettings",[]),_defineProperty(this,"lastModalId",0)}return _createClass(s,[{key:"show",value:function(){return document.body.appendChild(s.prepareModal(this.preparedSettings[this.lastModalId])),this}},{key:"close",value:function(){var e=(e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.preparedSettings[this.lastModalId].id,t=!0;return(t=(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==this.preparedSettings[e]&&this.preparedSettings[e].onCancel&&!1===this.preparedSettings[e].onCancel()?!1:t)&&document.querySelector('.fmodal-wrapper[data-id="'.concat(e,'"]')).remove(),this}},{key:"submit",value:function(){var e=(e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.preparedSettings[this.lastModalId].id,t=!0;return(t=void 0!==this.preparedSettings[e]&&this.preparedSettings[e].onOk&&!1===this.preparedSettings[e].onOk()?!1:t)&&document.querySelector('.fmodal-wrapper[data-id="'.concat(e,'"]')).remove(),this}},{key:"set",value:function(e){return this.lastModalId++,this.preparedSettings[this.lastModalId]=_classPrivateMethodGet(this,_prepareModalSettings,_prepareModalSettings2).call(this,e),this}}],[{key:"prepareModal",value:function(e){var t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),d=document.createElement("button"),i=document.createElement("button");return l.classList.add("fmodal-close"),l.onclick=function(){return FrostModal.close(e.id,!1)},l.innerText="X",o.classList.add("fmodal-header"),o.innerHTML=e.title,o.style.background=e.header.background||o.style.background,o.style.color=e.header.color||o.style.color,o.ondragover=function(e){return s.dragOver(e)},e.closeButton&&o.appendChild(l),a.classList.add("fmodal-body"),a.innerHTML=e.content,d.classList.add("fmodal-button","fmodal-cancel"),d.onclick=function(){return FrostModal.close(e.id)},d.innerHTML="Cancel",i.classList.add("fmodal-button","fmodal-accept"),i.onclick=function(){return FrostModal.submit(e.id)},i.innerHTML="Okay",r.classList.add("fmodal-footer"),r.appendChild(d),r.appendChild(i),n.classList.add("fmodal-container"),n.appendChild(o),n.appendChild(a),n.appendChild(r),s.makeDraggable(n),t.classList.add("fmodal-wrapper"),t.dataset.id=e.id,t.appendChild(n),t}},{key:"makeDraggable",value:function(t){var n=0,o=0,a=0,r=0;function e(e){(e=e||window.event).preventDefault(),a=e.clientX,r=e.clientY,document.onmouseup=d,document.onmousemove=l}function l(e){(e=e||window.event).preventDefault(),n=a-e.clientX,o=r-e.clientY,a=e.clientX,r=e.clientY,t.style.top=t.offsetTop-o+"px",t.style.left=t.offsetLeft-n+"px",t.style.position="absolute",t.parentElement.style.display="block"}function d(){document.onmouseup=null,document.onmousemove=null}t.querySelector(".fmodal-header")?t.querySelector(".fmodal-header").onmousedown=e:t.onmousedown=e}}]),s}();function _prepareModalSettings2(e){return{id:this.lastModalId,title:e.title||"",content:e.content||"",onOk:e.onOk||"",onCancel:e.onCancel||null,closeButton:e.closeButton||!0,header:{background:e.header?e.header.background:null,color:e.header?e.header.color:null}}}var FrostModal=new FrostModals;